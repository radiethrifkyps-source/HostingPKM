<?php
$dataNabi = [
    [
        "name" => "Nabi Adam AS",
        "videoId" => "I4quyukAkrg?si=g1Cj_0JnY2gfcte_",
        "description" => "Kisah Nabi Adam AS, manusia pertama yang diciptakan Allah SWT dan menjadi khalifah di muka bumi."
    ],
    [
        "name" => "Nabi Idris AS",
        "videoId" => "g6S2GkQFBoU?si=tXoMb2xf-wTAdI7I",
        "description" => "Kisah Nabi Idris AS, nabi yang diangkat ke langit dan dikenal sebagai orang pertama yang menulis dengan pena."
    ],
    [
        "name" => "Nabi Nuh AS",
        "videoId" => "m9nYuVSSUx0?si=HDgzt9lAH8jg2ndw",
        "description" => "Kisah Nabi Nuh AS dan bahtera besar yang menyelamatkan umat beriman dari banjir besar."
    ],
    [
        "name" => "Nabi Hud AS",
        "videoId" => "akBtsPjHOTg?si=FexeiFT1_VtHtKn3",
        "description" => "Kisah Nabi Hud AS yang diutus kepada kaum 'Ad yang sombong dan ingkar kepada Allah."
    ],
    [
        "name" => "Nabi Shaleh AS",
        "videoId" => "CpkhXOs3xlw?si=JPSbp3yUvUpctW-5",
        "description" => "Kisah Nabi Shaleh AS dan mukjizat unta yang keluar dari batu karang untuk kaum Tsamud."
    ],
    [
        "name" => "Nabi Ibrahim AS",
        "videoId" => "CpkhXOs3xlw?si=4FJCEF7zBN7z-7Oh",
        "description" => "Kisah Nabi Ibrahim AS, Bapak Para Nabi yang terkenal dengan keimanannya yang kuat kepada Allah."
    ],
    [
        "name" => "Nabi Luth AS",
        "videoId" => "8fvIEwpr3OQ?si=nq4Z3vesXf4qbE9M",
        "description" => "Kisah Nabi Luth AS yang berdakwah kepada kaumnya yang melakukan perbuatan keji."
    ],
    [
        "name" => "Nabi Ismail AS",
        "videoId" => "k-p1xsHFypQ?si=oKxnIvTxC7Fy847b",
        "description" => "Kisah Nabi Ismail AS, putra Nabi Ibrahim yang rela dikorbankan sebagai ujian keimanan."
    ],
    [
        "name" => "Nabi Ishaq AS",
        "videoId" => "REOtD421d5g?si=SjE3Q0pDaWwbo7Bi",
        "description" => "Kisah Nabi Ishaq AS, putra kedua Nabi Ibrahim yang menjadi nenek moyang Bani Israil."
    ],
    [
        "name" => "Nabi Yaqub AS",
        "videoId" => "F-Q0Sb6W6Sg?si=Dq8LFY9e1jorfHVM",
        "description" => "Kisah Nabi Yaqub AS (Nabi Israel) yang memiliki 12 putra yang menjadi cikal bakal 12 suku Bani Israil."
    ],
    [
        "name" => "Nabi Yusuf AS",
        "videoId" => "JpHI1laca-U?si=lQJl8JjyK_TPazRi",
        "description" => "Kisah Nabi Yusuf AS yang penuh dengan cobaan namun tetap sabar dan akhirnya menjadi penguasa Mesir."
    ],
    [
        "name" => "Nabi Ayyub AS",
        "videoId" => "HXxxmIzdPYc?si=bbzHuud4O3ErCxmg",
        "description" => "Kisah Nabi Ayyub AS yang terkenal dengan kesabarannya menghadapi berbagai cobaan dan penyakit."
    ],
    [
        "name" => "Nabi Syu'aib AS",
        "videoId" => "yDR01h2ga0Q?si=zlAr17UfJCRz1UjD",
        "description" => "Kisah Nabi Syu'aib AS yang mengajak kaumnya untuk berbuat jujur dalam perdagangan dan takaran."
    ],
    [
        "name" => "Nabi Musa AS",
        "videoId" => "O8-D-x9j1V4?si=hsr4iDrANN5797Pa",
        "description" => "Kisah Nabi Musa AS yang membebaskan Bani Israil dari perbudakan Fir'aun di Mesir."
    ],
    [
        "name" => "Nabi Harun AS",
        "videoId" => "FGaqYtFQgEo?si=7AOoNK1XX5C7eRK-",
        "description" => "Kisah Nabi Harun AS, saudara Nabi Musa yang membantu menyampaikan risalah kepada Fir'aun."
    ],
    [
        "name" => "Nabi Dzulkifli AS",
        "videoId" => "HhoZexh5jUQ?si=_hD2y-nZRVcj0MnP",
        "description" => "Kisah Nabi Dzulkifli AS yang terkenal dengan kesabarannya dalam beribadah dan berdakwah."
    ],
    [
        "name" => "Nabi Daud AS",
        "videoId" => "7jTMFOoA_c0?si=d-Iog6ho2RMijJPh",
        "description" => "Kisah Nabi Daud AS yang dikaruniai suara merdu dan kemampuan melunakkan besi."
    ],
    [
        "name" => "Nabi Sulaiman AS",
        "videoId" => "YUiST3wPuNM?si=YWarI8GxPvTp-K7X",
        "description" => "Kisah Nabi Sulaiman AS yang dikaruniai kemampuan berbicara dengan hewan dan menguasai jin."
    ],
    [
        "name" => "Nabi Ilyas AS",
        "videoId" => "N-MvzIEVDQg?si=SDsghXUoS6fWhSnV",
        "description" => "Kisah Nabi Ilyas AS yang berdakwah kepada kaumnya yang menyembah berhala Baal."
    ],
    [
        "name" => "Nabi Ilyasa AS",
        "videoId" => "w2H1uuJ5Mf0?si=hHpUVOggWiEYa01D",
        "description" => "Kisah Nabi Ilyasa AS yang melanjutkan perjuangan Nabi Ilyas dalam menegakkan tauhid."
    ],
    [
        "name" => "Nabi Yunus AS",
        "videoId" => "z7wZs9RpdrU?si=I35F57RyHntgBM3u",
        "description" => "Kisah Nabi Yunus AS yang ditelan ikan besar dan bertaubat di dalam perut ikan."
    ],
    [
        "name" => "Nabi Zakariya AS",
        "videoId" => "dCWd4h8vNhg?si=Iq5pCnEUQAKrFE2t",
        "description" => "Kisah Nabi Zakariya AS yang dikaruniai putra di usia tua bernama Yahya."
    ],
    [
        "name" => "Nabi Yahya AS",
        "videoId" => "w0eRBOy9P2s?si=HE42v5e1lFUiucL9",
        "description" => "Kisah Nabi Yahya AS yang hidup zuhud dan menjadi saksi kebenaran Nabi Isa."
    ],
    [
        "name" => "Nabi Isa AS",
        "videoId" => "smy348E0Ad8?si=XC9zt26F12BJXo7e",
        "description" => "Kisah Nabi Isa AS yang lahir tanpa ayah dan dikaruniai mukjizat menghidupkan orang mati."
    ],
    [
        "name" => "Nabi Muhammad SAW",
        "videoId" => "ee9kk_12sUQ?si=g2lo2j2CW6jqkm3p",
        "description" => "Kisah Nabi Muhammad SAW, nabi terakhir dan rasul penutup yang membawa agama Islam."
    ]
];

// Ambil parameter dari URL
$search = isset($_GET['search']) ? $_GET['search'] : '';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$itemsPerPage = 5;

// Filter data berdasarkan pencarian
$filteredData = $dataNabi;
if (!empty($search)) {
    $filteredData = array_filter($dataNabi, function($prophet) use ($search) {
        return stripos($prophet['name'], $search) !== false || 
               stripos($prophet['description'], $search) !== false;
    });
    $filteredData = array_values($filteredData);
}

// Hitung pagination
$totalItems = count($filteredData);
$totalPages = ceil($totalItems / $itemsPerPage);
$page = max(1, min($page, $totalPages));

// Ambil data untuk halaman saat ini
$offset = ($page - 1) * $itemsPerPage;
$pageData = array_slice($filteredData, $offset, $itemsPerPage);
?>
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kisah 25 Nabi | Islamic Learning</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="video_nabi.css">
</head>
<body>
    <div id="loading-screen">
        <div class="loader-container">
            <div class="book-icon">ğŸ¬</div>
            <h1 class="loading-title">Video Kisah Kisah Nabi</h1>
            
            <div class="spinner-container">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>

            <p class="loading-text">"Belajarlah Dari Kisah Tauladan Nabi Dan Rasul"<span class="dots"></span></p>
            
            <div class="progress-container">
                <div class="progress-bar-rgb"></div>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-expand-lg bg-body-secondary" style="min-height: 8vh;">
            <div class="container-fluid">
                <p class="navbar-brand text-primary fs-5 fs-md-4 m-0 fw-bold">ğŸ“— Media Pembelajaran Agama Islam</p>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav ms-auto">
                        <a class="nav-link nav-custom text-black fs-4 px-3" href="../../index.php">HOME</a>
                        <a class="nav-link nav-custom text-black fs-4 px-3" href="../../author.php">AUTHOR</a>
                    </div>
                </div>
            </div>
    </nav>

    <nav class="navbar navbar-expand-lg bg-light nav-bg-image">
        <div class="container-fluid d-flex justify-content-center align-items-center h-100">
            <img src="img/videonabi.png" class="img-welcome" alt="Welcome">
        </div>
    </nav>

    <div class="header">
        <h1>KISAH 25 NABI</h1>
        <p>Belajar dari Teladan Para Rasul</p>
    </div>

    <div class="container">
        <div class="search-container">
            <form method="GET" class="search-form">
                <input type="text" 
                       class="search-box" 
                       name="search" 
                       value="<?php echo htmlspecialchars($search); ?>"
                       placeholder="Cari Nabi...">
                <button type="submit" class="search-btn">ğŸ” Cari</button>
            </form>
        </div>

        <h2 class="category-title">ğŸ“– Kisah Para Nabi BY KABI - Kisah Teladan Nabi</h2>
        
        <div class="content-grid">
            <?php if (count($pageData) > 0): ?>
                <?php foreach ($pageData as $prophet): ?>
                    <div class="video-card">
                        <h2><?php echo htmlspecialchars($prophet['name']); ?></h2>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/<?php echo htmlspecialchars($prophet['videoId']); ?>" 
                                    class="video" 
                                    frameborder="0" 
                                    allowfullscreen>
                            </iframe>
                        </div>
                        <div class="description">
                            <?php echo htmlspecialchars($prophet['description']); ?>
                        </div>
                    </div>
                <?php endforeach; ?>
            <?php else: ?>
                <div class="no-results">âŒ Tidak ada hasil yang ditemukan</div>
            <?php endif; ?>
        </div>
        
        <?php if ($totalPages > 1): ?>
            <div class="pagination">
                <?php if ($page > 1): ?>
                    <a href="?page=<?php echo $page - 1; ?><?php echo !empty($search) ? '&search=' . urlencode($search) : ''; ?>">
                        â† Sebelumnya
                    </a>
                <?php else: ?>
                    <span class="disabled">â† Sebelumnya</span>
                <?php endif; ?>

                <?php for ($i = 1; $i <= $totalPages; $i++): ?>
                    <?php if ($i == 1 || $i == $totalPages || ($i >= $page - 1 && $i <= $page + 1)): ?>
                        <?php if ($i == $page): ?>
                            <span class="active"><?php echo $i; ?></span>
                        <?php else: ?>
                            <a href="?page=<?php echo $i; ?><?php echo !empty($search) ? '&search=' . urlencode($search) : ''; ?>">
                                <?php echo $i; ?>
                            </a>
                        <?php endif; ?>
                    <?php elseif ($i == $page - 2 || $i == $page + 2): ?>
                        <span class="dots">...</span>
                    <?php endif; ?>
                <?php endfor; ?>

                <?php if ($page < $totalPages): ?>
                    <a href="?page=<?php echo $page + 1; ?><?php echo !empty($search) ? '&search=' . urlencode($search) : ''; ?>">
                        Selanjutnya â†’
                    </a>
                <?php else: ?>
                    <span class="disabled">Selanjutnya â†’</span>
                <?php endif; ?>
            </div>
        <?php endif; ?>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>